# คู่มืออ้างอิงสถานะ / Status Reference

**คู่มือนี้เหมาะสำหรับ**: ทุกคนที่ต้องการเข้าใจสถานะต่างๆ ในระบบ

---

## สถานะระบบ / System Status

**ที่**: หน้า Dashboard สาธารณะ (`/`)

| Status | Color | Icon | Meaning (TH) | Meaning (EN) | When |
|--------|-------|------|--------------|--------------|------|
| **Open** | 🟢 Green | ✅ | เปิดให้บริการปกติ | All staff available | ทุกคนพร้อมรับงาน |
| **Limited** | 🟡 Yellow | ⚠️ | บริการจำกัด | Few staff available | เจ้าหน้าที่ว่างน้อย |
| **Closed** | 🔴 Red | ❌ | ปิดให้บริการ | No service | ไม่มีเจ้าหน้าที่ว่าง |

### รายละเอียด / Details

**🟢 Open (เปิดให้บริการปกติ)**
- **เงื่อนไข**: มีเจ้าหน้าที่ว่าง ≥ 50% ของทีม
- **ความหมาย**: บริการปกติ, รับจองได้
- **ลูกค้าควรทำ**: จองเลย

**🟡 Limited (บริการจำกัด)**
- **เงื่อนไข**: มีเจ้าหน้าที่ว่าง < 50% แต่ > 0
- **ความหมาย**: มีเจ้าหน้าที่ว่างน้อย, ช่วงเวลาอาจจำกัด
- **ลูกค้าควรทำ**: ลองจอง, ถ้าไม่มีช่องว่าง → จองวันอื่น

**🔴 Closed (ปิดให้บริการ)**
- **เงื่อนไข**: ไม่มีเจ้าหน้าที่ว่างเลย (0%)
- **ความหมาย**: ไม่สามารถรับจองได้
- **ลูกค้าควรทำ**: จองวันอื่น หรือ โทรสอบถาม

---

## สถานะนัดหมาย / Appointment Status

**ที่**: ทุกหน้าที่แสดงนัดหมาย

| Status | Color | Badge | Meaning (TH) | Meaning (EN) | Who Can See |
|--------|-------|-------|--------------|--------------|-------------|
| **PENDING** | 🟡 Yellow | PENDING | รอยืนยัน | Awaiting confirmation | Customer, Staff (Available), Admin |
| **CONFIRMED** | 🔵 Blue | CONFIRMED | ยืนยันแล้ว | Confirmed | Customer, Staff (My), Admin |
| **COMPLETED** | 🟢 Green | COMPLETED | เสร็จสิ้น | Completed | Customer, Staff (My), Admin |
| **CANCELLED** | 🔴 Red | CANCELLED | ยกเลิก | Cancelled | Customer, Staff, Admin |

### รายละเอียด / Details

**🟡 PENDING (รอยืนยัน)**
- **ความหมาย**: นัดหมายถูกสร้างแล้ว แต่**ยังไม่มีเจ้าหน้าที่รับ**
- **เมื่อไหร่เกิด**: ลูกค้าจองผ่านเว็บ → สถานะเป็น PENDING ทันที
- **ลูกค้าเห็นอะไร**: "รอยืนยัน" - รอเจ้าหน้าที่รับงาน
- **เจ้าหน้าที่ทำอะไร**: Pickup งาน (ใน Available tab) หรือ รอ Admin assign
- **Admin ทำอะไร**: Assign ให้เจ้าหน้าที่ทันที
- **ระยะเวลา**: ควรไม่เกิน **1 ชั่วโมง** (เป้าหมาย: assign เร็วที่สุด)

**🔵 CONFIRMED (ยืนยันแล้ว)**
- **ความหมาย**: มีเจ้าหน้าที่รับผิดชอบแล้ว
- **เมื่อไหร่เกิด**:
  - เจ้าหน้าที่ Pickup งาน → PENDING → CONFIRMED
  - Admin assign งาน → PENDING → CONFIRMED
  - เจ้าหน้าที่สร้างนัดหมาย → CONFIRMED ทันที (ไม่ผ่าน PENDING)
- **ลูกค้าเห็นอะไร**: "ยืนยันแล้ว" - มีเจ้าหน้าที่รับผิดชอบ รอวันนัด
- **เจ้าหน้าที่ทำอะไร**: เตรียมตัว, อ่าน Problem Description, ไปพบลูกค้าตามนัด
- **ระยะเวลา**: ตั้งแต่วันจองจนถึงวันนัด (อาจ 1 วัน - 2 สัปดาห์)

**🟢 COMPLETED (เสร็จสิ้น)**
- **ความหมาย**: งานเสร็จสิ้นแล้ว
- **เมื่อไหร่เกิด**: เจ้าหน้าที่ทำงานเสร็จ → เปลี่ยนสถานะเป็น COMPLETED
- **ลูกค้าเห็นอะไร**: "เสร็จสิ้น" - งานเสร็จแล้ว
- **เจ้าหน้าที่ทำอะไร**: ไม่ต้องทำอะไรแล้ว (เว้นแต่ลูกค้าติดต่อกลับมา)

**🔴 CANCELLED (ยกเลิก)**
- **ความหมาย**: นัดหมายถูกยกเลิก
- **เมื่อไหร่เกิด**:
  - ลูกค้ายกเลิก (โทรมา)
  - เจ้าหน้าที่ยกเลิก (เจอปัญหา)
  - Admin ยกเลิก (ระบบปิดให้บริการ)
- **ลูกค้าเห็นอะไร**: "ยกเลิก" - นัดหมายไม่มีผล
- **เจ้าหน้าที่/Admin ทำอะไร**: ติดต่อลูกค้า (ถ้าเป็น Staff/Admin ยกเลิก)

---

## Status Flow / ขั้นตอนการเปลี่ยนสถานะ

### Flow 1: ลูกค้าจอง → Staff Pickup

```
┌──────────┐
│ Customer │ จองผ่านเว็บ
│  Books   │
└────┬─────┘
     │
     ▼
┌──────────┐
│ PENDING  │ รอเจ้าหน้าที่รับงาน
└────┬─────┘
     │
     │ Staff Pickup
     │
     ▼
┌──────────┐
│CONFIRMED │ เจ้าหน้าที่รับผิดชอบ
└────┬─────┘
     │
     │ Staff ทำงานเสร็จ
     │
     ▼
┌──────────┐
│COMPLETED │ งานเสร็จ
└──────────┘
```

**ระยะเวลา**:
- PENDING: 0-1 ชั่วโมง
- CONFIRMED: 1 วัน - 2 สัปดาห์ (ก่อนถึงวันนัด)
- COMPLETED: หลังวันนัด

---

### Flow 2: ลูกค้าจอง → Admin Assign

```
┌──────────┐
│ Customer │ จองผ่านเว็บ
│  Books   │
└────┬─────┘
     │
     ▼
┌──────────┐
│ PENDING  │ รอ Admin assign
└────┬─────┘
     │
     │ Admin Assign
     │
     ▼
┌──────────┐
│CONFIRMED │ เจ้าหน้าที่ได้รับมอบหมาย
└────┬─────┘
     │
     │ Staff ทำงานเสร็จ
     │
     ▼
┌──────────┐
│COMPLETED │ งานเสร็จ
└──────────┘
```

---

### Flow 3: เจ้าหน้าที่สร้างนัดหมาย (Walk-in)

```
┌──────────┐
│  Staff   │ สร้างนัดหมายให้ลูกค้า Walk-in
│ Creates  │
└────┬─────┘
     │
     │ (ข้าม PENDING)
     │
     ▼
┌──────────┐
│CONFIRMED │ Auto-assign ให้ Staff ที่สร้าง
└────┬─────┘
     │
     │ Staff ทำงานเสร็จ
     │
     ▼
┌──────────┐
│COMPLETED │ งานเสร็จ
└──────────┘
```

**สังเกต**: ข้ามขั้นตอน PENDING เพราะเจ้าหน้าที่สร้างเองและ assign ให้ตัวเองทันที

---

### Flow 4: ยกเลิกนัดหมาย

```
┌──────────┐       ┌──────────┐
│ PENDING  │──────▶│CANCELLED │
└──────────┘       └──────────┘

┌──────────┐       ┌──────────┐
│CONFIRMED │──────▶│CANCELLED │
└──────────┘       └──────────┘

┌──────────┐       ┌──────────┐
│COMPLETED │────X──│CANCELLED │ (ยกเลิกไม่ได้)
└──────────┘       └──────────┘
```

**หมายเหตุ**: ไม่สามารถยกเลิกนัดหมายที่เสร็จแล้ว (COMPLETED) ได้

---

## ระยะเวลาแต่ละสถานะ / Duration by Status

| Status | Expected Duration | If Longer Than |
|--------|-------------------|----------------|
| PENDING | < 1 ชั่วโมง | Admin ต้องเช็คและ assign ทันที |
| CONFIRMED | จนถึงวันนัด | ปกติ (รอวันนัด) |
| COMPLETED | ถาวร | - |
| CANCELLED | ถาวร | - |

---

## Best Practices / แนวทางที่ดี

### สำหรับ Admin

- **ลด PENDING**: Assign งานเร็วที่สุด (เป้าหมาย < 1 ชั่วโมง)
- **เช็คทุกเช้า**: ดูว่ามี PENDING ค้างไหม
- **ใช้ Bulk Assign**: ถ้ามี PENDING เยอะ

### สำหรับ Staff

- **เช็ค Available**: เช็คงาน PENDING ในแท็บ Available
- **Pickup เร็ว**: Pickup งานที่เหมาะสมทันที
- **อัปเดตสถานะ**: เปลี่ยนเป็น COMPLETED ทันทีหลังเสร็จงาน

---

**⬅️ ก่อนหน้า**: [60-Services-Reference.md](60-Services-Reference.md) | **➡️ ถัดไป**: [62-Working-Hours.md](62-Working-Hours.md)
